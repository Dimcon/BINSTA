{% extends "base.html" %}

{% block content %}

<navbar class="navbar navbar-expand-md titlebar">
		  <a class="navbar-brand" href="#">BINST</a>
		  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		    <i class="fas fa-bars" style="color:white"></i>
		  </button>
			 <div class="collapse navbar-collapse" id="navbarSupportedContent">
		    <ul class="navbar-nav mr-auto">
		      <li class="nav-item active">
		        <a class="nav-link" href="/login">Log In<span class="sr-only">(current)</span></a>
		      </li>
		    </ul>
		    <form class="form-inline my-2 my-lg-0">
		      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
		      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
		    </form>
		  </div>
	</navbar>

<div id="flashedmsgs" class="swing" style="text-align:center;margin:1rem;display:absolute">
	</div>

<script>
	function namechecker() {
		uemail = $('#email').val()
		$.post("/signup",{
			namecheck: "true",
			email: uemail
		}).done(function(fromserver) {
			if (fromserver.Taken == 't') {
				$('#email').popover({
    			    trigger: 'manual',
    			    placement: 'right',
    			    content: 'This Email address already exists. Please try another'
    			});
    			$('#email').popover("show");
				$('#email').css('border-color', '#FF0000');
				$('#email').addClass("invalid");
			} else {
				$('#email').css('border-color', '#00FF00');
				$('#email').removeClass("invalid");
    			$('#email').popover("hide");
			}
		}).fail(function() {
		})
	}
</script>

<div style="margin-top:5%;overflow-y:scroll" class="row justify-content-md-center">
    <div class="col-md-4 card bg-dark text-light" style="padding:40px;text-align:center">&nbsp
        <h3>Sign Up</h3>
        <form method="post">
			<div class="row" style="text-align:left">
				<div class="col-md">
					<div class="form-group">
        			    <label class="" for="form1" >First Name</label>

        			    <input type="text" required="true" name="name" id="form1" class="form-control">
        			</div>
					<div class="form-group">
        			    <label class="" for="form1" >Middle Name</label>
        			    <input type="text" name="middlename" id="form1" class="form-control">
        			</div>
					<div class="form-group">
        			    <label class="" for="form1" >Last Name</label>
        			    <input type="text" name="lastname" id="form1" class="form-control">
        			</div>
				</div>
				<div class="col-md">
					<div class="form-group" id="email-group">
        			    <label class="" for="form1" >Email</label>
        			    <input data-toggle="popover" title="Error"
							   data-content="This Email already exists"
							   data-trigger="focus"
							   onfocusout="javascript:namechecker()"
							   required="true"
							   type="email" name="email" id="email" class="form-control">
        			</div>
					<div class="form-group">
        			    <label class="" for="form1" >Date Of Birth</label>
        			    <input type="date" name="dob" id="form1" class="form-control">
        			</div>
        			<div class="form-group">
        			    <label class="" for="form2" >Password</label>
        			    <input required="true"
							   minlength="8"
							   type="password" name="passw" id="form2" class="form-control">
        			</div>
					<div class="form-group">
        			    <label class="" for="form2" >Confirm Password</label>
        			    <input required="true"
							   minlength="8"
							   type="password" name="cpassw" id="form2" class="form-control">
        			</div>
				</div>
				</div>
        <hr>
        <div class="row">
             <div class="col-md-3">&nbsp<br>&nbsp
                </div>
        <button name="submitbtn" type="submit" style="width:150px" class="col-md-6 btn btn-dark">
        Log in!
        </button>
            <div class="col-md-3">&nbsp<br>&nbsp
                </div>
        </div>
        </form>
    </div>
</div>
{% endblock %}
